"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Config = void 0;
const path_1 = __importDefault(require("path"));
const fs_extra_1 = __importDefault(require("fs-extra"));
/** 保存和读取本地配置 */
class Config {
    static get data() {
        if (!fs_extra_1.default.existsSync(this.FilePath)) {
            fs_extra_1.default.writeJSONSync(this.FilePath, {});
        }
        return fs_extra_1.default.readJSONSync(this.FilePath);
    }
    static get(key, defaultV) {
        let d = this.data;
        let arr = key.split(".");
        let v = d;
        for (let i = 0; i < arr.length; i++) {
            const k = arr[i];
            v = v[k];
            if (i < arr.length - 1) {
                if (v === undefined) {
                    v = defaultV;
                    this.set(key, defaultV);
                    break;
                }
                if (typeof v !== "object") {
                    v = defaultV;
                    console.error(`${k}的值不是一个对象`);
                    break;
                }
            }
        }
        return v;
    }
    static set(key, value) {
        let d = this.data;
        if (d) {
            let arr = key.split(".");
            let v = d;
            for (let i = 0; i < arr.length; i++) {
                const k = arr[i];
                if (i == arr.length - 1) {
                    v[k] = value;
                }
                else {
                    if (v[k] == undefined)
                        v[k] = {};
                    v = v[k];
                    if (typeof v != "object") {
                        console.error(`${k}的值不是一个对象`);
                        return;
                    }
                }
            }
            fs_extra_1.default.writeJSONSync(this.FilePath, d, { spaces: 4 });
        }
    }
}
exports.Config = Config;
Config.FilePath = path_1.default.join(Editor.Project.path, "/settings/amun-editor-config.json");
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29uZmlnLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc291cmNlL3Rvb2xzL0NvbmZpZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxnREFBd0I7QUFDeEIsd0RBQTBCO0FBQzFCLGdCQUFnQjtBQUNoQixNQUFhLE1BQU07SUFHUixNQUFNLEtBQUssSUFBSTtRQUNsQixJQUFJLENBQUMsa0JBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQy9CLGtCQUFFLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLENBQUM7U0FDdkM7UUFDRCxPQUFPLGtCQUFFLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQVEsQ0FBQztJQUNqRCxDQUFDO0lBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBSSxHQUFXLEVBQUUsUUFBVztRQUN6QyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQ2xCLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1YsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDakMsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2pCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFNLENBQUM7WUFDZCxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtnQkFDcEIsSUFBSSxDQUFDLEtBQUssU0FBUyxFQUFFO29CQUNqQixDQUFDLEdBQUcsUUFBUSxDQUFDO29CQUNiLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO29CQUN4QixNQUFNO2lCQUNUO2dCQUNELElBQUksT0FBTyxDQUFDLEtBQUssUUFBUSxFQUFFO29CQUN2QixDQUFDLEdBQUcsUUFBUSxDQUFDO29CQUNiLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO29CQUM5QixNQUFNO2lCQUNUO2FBQ0o7U0FDSjtRQUNELE9BQU8sQ0FBQyxDQUFDO0lBQ2IsQ0FBQztJQUVNLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBVyxFQUFFLEtBQVU7UUFDckMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztRQUNsQixJQUFJLENBQUMsRUFBRTtZQUNILElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDekIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ1YsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ2pDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDakIsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7b0JBQ3JCLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7aUJBQ2hCO3FCQUFNO29CQUNILElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLFNBQVM7d0JBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztvQkFDakMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDVCxJQUFJLE9BQU8sQ0FBQyxJQUFJLFFBQVEsRUFBRTt3QkFDdEIsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7d0JBQzlCLE9BQU87cUJBQ1Y7aUJBQ0o7YUFDSjtZQUNELGtCQUFFLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDckQ7SUFDTCxDQUFDOztBQXBETCx3QkFxREM7QUFwRGtCLGVBQVEsR0FBRyxjQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLG1DQUFtQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xyXG5pbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XHJcbi8qKiDkv53lrZjlkozor7vlj5bmnKzlnLDphY3nva4gKi9cclxuZXhwb3J0IGNsYXNzIENvbmZpZyB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBGaWxlUGF0aCA9IHBhdGguam9pbihFZGl0b3IuUHJvamVjdC5wYXRoLCBcIi9zZXR0aW5ncy9hbXVuLWVkaXRvci1jb25maWcuanNvblwiKTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldCBkYXRhKCkge1xyXG4gICAgICAgIGlmICghZnMuZXhpc3RzU3luYyh0aGlzLkZpbGVQYXRoKSkge1xyXG4gICAgICAgICAgICBmcy53cml0ZUpTT05TeW5jKHRoaXMuRmlsZVBhdGgsIHt9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZzLnJlYWRKU09OU3luYyh0aGlzLkZpbGVQYXRoKSBhcyBhbnk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGdldDxUPihrZXk6IHN0cmluZywgZGVmYXVsdFY6IFQpIHtcclxuICAgICAgICBsZXQgZCA9IHRoaXMuZGF0YTtcclxuICAgICAgICBsZXQgYXJyID0ga2V5LnNwbGl0KFwiLlwiKTtcclxuICAgICAgICBsZXQgdiA9IGQ7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgayA9IGFycltpXTtcclxuICAgICAgICAgICAgdiA9IHZba10gYXMgVDtcclxuICAgICAgICAgICAgaWYgKGkgPCBhcnIubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHYgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHYgPSBkZWZhdWx0VjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldChrZXksIGRlZmF1bHRWKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdiAhPT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHYgPSBkZWZhdWx0VjtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGAke2t955qE5YC85LiN5piv5LiA5Liq5a+56LGhYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHY7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBzZXQoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcclxuICAgICAgICBsZXQgZCA9IHRoaXMuZGF0YTtcclxuICAgICAgICBpZiAoZCkge1xyXG4gICAgICAgICAgICBsZXQgYXJyID0ga2V5LnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgbGV0IHYgPSBkO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgayA9IGFycltpXTtcclxuICAgICAgICAgICAgICAgIGlmIChpID09IGFyci5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdltrXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodltrXSA9PSB1bmRlZmluZWQpIHZba10gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICB2ID0gdltrXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHYgIT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGAke2t955qE5YC85LiN5piv5LiA5Liq5a+56LGhYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnMud3JpdGVKU09OU3luYyh0aGlzLkZpbGVQYXRoLCBkLCB7IHNwYWNlczogNCB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXX0=